build -c opt \
      --incompatible_enable_cc_toolchain_resolution \
      --incompatible_require_linker_input_cc_api

build --flag_alias=test_link_mode=@config//:test_link_mode
build --flag_alias=test_thread_mode=@config//:test_thread_mode
build --flag_alias=release_dpc=@config//:release_dpc

test:host \
    --build_tag_filters="host" \
    --test_tag_filters="host"

test:dpc-cpu \
    --build_tag_filters="dpc" \
    --test_tag_filters="dpc" \
    --test_arg="--device=cpu"

test:dpc-gpu \
    --build_tag_filters="dpc" \
    --test_tag_filters="dpc" \
    --test_arg="--device=gpu"

test:cpu-only \
    --build_tag_filters="cpu-only" \
    --test_tag_filters="cpu-only" \
    --test_arg="--device=cpu"

test:gpu-only \
    --build_tag_filters="gpu-only" \
    --test_tag_filters="gpu-only" \
    --test_arg="--device=gpu"
